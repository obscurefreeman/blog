{% if site.footer_scripts %}
  {% for script in site.footer_scripts %}
    <script src="{{ script | relative_url }}"></script>
  {% endfor %}
{% else %}
  <script src="{{ '/assets/js/main.min.js' | relative_url }}"></script>
{% endif %}

{% if site.search == true or page.layout == "search" %}
  {%- assign search_provider = site.search_provider | default: "lunr" -%}
  {%- case search_provider -%}
    {%- when "lunr" -%}
      {% include_cached search/lunr-search-scripts.html %}
    {%- when "google" -%}
      {% include_cached search/google-search-scripts.html %}
    {%- when "algolia" -%}
      {% include_cached search/algolia-search-scripts.html %}
  {%- endcase -%}
{% endif %}

{% include analytics.html %}
{% include /comments-providers/scripts.html %}

{% if site.after_footer_scripts %}
  {% for script in site.after_footer_scripts %}
    <script src="{{ script | relative_url }}"></script>
  {% endfor %}
{% endif %}

<script src="assets/js/obsfm/randomtext.js"></script>
<script src="https://unpkg.com/zdog@1/dist/zdog.dist.min.js"></script>
<script src="assets/js/obsfm/lambdalogo.js"></script>
<script src="assets/js/obsfm/swiper.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@widgetbot/crate@3" async defer>
  new Crate({
    server: '806044973795246080',
    channel: '806044973795246083',
    color: '#00adb5'
  })
</script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.highlight').forEach(function(block) {
      const copyBtn = document.createElement('button');
      copyBtn.className = 'copy-btn';
      copyBtn.innerHTML = '<i class="far fa-copy"></i>';
      block.appendChild(copyBtn);

      copyBtn.addEventListener('click', function() {
        const code = block.querySelector('pre').innerText;
        navigator.clipboard.writeText(code).then(function() {
          copyBtn.innerHTML = '<i class="fas fa-check"></i>';
          setTimeout(function() {
            copyBtn.innerHTML = '<i class="far fa-copy"></i>';
          }, 2000);
        });
      });
    });
  });
</script>

<!-- 这是编辑器相关的代码 -->
<!-- <script src="assets/js/obsfm/editor.js"></script> -->
<!-- 这是备用的，别管他 -->
<!-- <script src="assets/js/ckeditor5/build/ckeditor.js"></script> -->